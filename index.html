<!DOCTYPE html>
<html lang="fr" data-color-scheme="light">
<head>
  <meta charset="UTF-8">
  <title>Tableau de bord Benchmarks IA 2026</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* ==== PERPLEXITY DESIGN SYSTEM (SIMPLIFIED) ==== */
    :root {
      --color-white: rgba(255, 255, 255, 1);
      --color-black: rgba(0, 0, 0, 1);
      --color-cream-50: rgba(252, 252, 249, 1);
      --color-cream-100: rgba(255, 255, 253, 1);
      --color-gray-200: rgba(245, 245, 245, 1);
      --color-gray-300: rgba(167, 169, 169, 1);
      --color-gray-400: rgba(119, 124, 124, 1);
      --color-slate-500: rgba(98, 108, 113, 1);
      --color-brown-600: rgba(94, 82, 64, 1);
      --color-charcoal-700: rgba(31, 33, 33, 1);
      --color-charcoal-800: rgba(38, 40, 40, 1);
      --color-slate-900: rgba(19, 52, 59, 1);
      --color-teal-300: rgba(50, 184, 198, 1);
      --color-teal-400: rgba(45, 166, 178, 1);
      --color-teal-500: rgba(33, 128, 141, 1);
      --color-teal-600: rgba(29, 116, 128, 1);
      --color-teal-700: rgba(26, 104, 115, 1);
      --color-red-400: rgba(255, 84, 89, 1);
      --color-red-500: rgba(192, 21, 47, 1);
      --color-orange-500: rgba(168, 75, 47, 1);

      --color-brown-600-rgb: 94, 82, 64;
      --color-teal-500-rgb: 33, 128, 141;
      --color-slate-900-rgb: 19, 52, 59;
      --color-slate-500-rgb: 98, 108, 113;
      --color-red-500-rgb: 192, 21, 47;
      --color-orange-500-rgb: 168, 75, 47;

      --color-background: var(--color-cream-50);
      --color-surface: var(--color-cream-100);
      --color-text-primary: var(--color-slate-900);
      --color-text-secondary: var(--color-slate-500);
      --color-primary: var(--color-teal-500);
      --color-primary-hover: var(--color-teal-600);
      --color-border: rgba(var(--color-brown-600-rgb), 0.2);
      --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
      --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

      --font-family-base: "FKGroteskNeue", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      --font-size-base: 14px;
      --font-size-sm: 12px;
      --font-size-lg: 16px;

      --radius-sm: 6px;
      --radius-base: 8px;
      --radius-lg: 12px;

      --space-4: 4px;
      --space-8: 8px;
      --space-12: 12px;
      --space-16: 16px;
      --space-20: 20px;
      --space-24: 24px;

      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
      --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.08);

      --focus-outline: 2px solid var(--color-primary);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --color-background: var(--color-charcoal-700);
        --color-surface: var(--color-charcoal-800);
        --color-text-primary: var(--color-gray-200);
        --color-text-secondary: rgba(245, 245, 245, 0.7);
        --color-primary: var(--color-teal-300);
        --color-primary-hover: var(--color-teal-400);
        --color-border: rgba(119,124,124,0.3);
        --color-card-border: rgba(119,124,124,0.2);
        --color-focus-ring: rgba(50,184,198,0.4);
      }
    }

    [data-color-scheme="dark"] {
      --color-background: var(--color-charcoal-700);
      --color-surface: var(--color-charcoal-800);
      --color-text-primary: var(--color-gray-200);
      --color-text-secondary: rgba(245, 245, 245, 0.7);
      --color-primary: var(--color-teal-300);
      --color-primary-hover: var(--color-teal-400);
      --color-border: rgba(119,124,124,0.3);
      --color-card-border: rgba(119,124,124,0.2);
      --color-focus-ring: rgba(50,184,198,0.4);
    }

    [data-color-scheme="light"] {
      --color-background: var(--color-cream-50);
      --color-surface: var(--color-cream-100);
      --color-text-primary: var(--color-slate-900);
      --color-text-secondary: var(--color-slate-500);
      --color-primary: var(--color-teal-500);
      --color-primary-hover: var(--color-teal-600);
      --color-border: rgba(var(--color-brown-600-rgb), 0.2);
      --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
      --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
    }

    @font-face {
      font-family: 'FKGroteskNeue';
      src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2') format('woff2');
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: var(--font-family-base);
      font-size: var(--font-size-base);
      background-color: var(--color-background);
      color: var(--color-text-primary);
    }

    .app-root {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .app-header {
      padding: 16px 24px;
      border-bottom: 1px solid var(--color-border);
      background: radial-gradient(circle at top left, rgba(33,128,141,0.08), transparent 60%);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .app-title-block {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .app-title {
      font-size: 20px;
      font-weight: 600;
      letter-spacing: -0.02em;
    }

    .app-subtitle {
      font-size: 13px;
      color: var(--color-text-secondary);
    }

    .tag {
      display: inline-flex;
      align-items: center;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      border: 1px solid rgba(33,128,141,0.3);
      background-color: rgba(33,128,141,0.08);
      color: var(--color-primary);
      gap: 6px;
    }

    .tag-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background-color: var(--color-primary);
    }

    .app-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 16px 24px 24px;
      gap: 16px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .filters-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
      min-width: 150px;
    }

    .filter-label {
      font-size: 11px;
      color: var(--color-text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .select,
    .search-input {
      width: 100%;
      padding: 8px 10px;
      border-radius: var(--radius-base);
      border: 1px solid var(--color-border);
      background-color: var(--color-surface);
      color: var(--color-text-primary);
      font-size: 13px;
      outline: none;
      appearance: none;
    }

    .select:focus,
    .search-input:focus {
      border-color: var(--color-primary);
      box-shadow: 0 0 0 2px var(--color-focus-ring);
    }

    .search-input {
      padding-left: 26px;
      background-image: url("data:image/svg+xml,%3Csvg width='14' height='14' viewBox='0 0 24 24' fill='none' stroke='%2399A1A8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='11' cy='11' r='7'/%3E%3Cline x1='16.5' y1='16.5' x2='21' y2='21'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: 7px center;
      background-size: 14px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .pill {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      border: 1px solid var(--color-border);
      background-color: transparent;
      color: var(--color-text-secondary);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .pill.active {
      border-color: var(--color-primary);
      background-color: rgba(33,128,141,0.08);
      color: var(--color-primary);
    }

    .pill-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background-color: rgba(33,128,141,0.4);
    }

    .pill.active .pill-dot {
      background-color: var(--color-primary);
    }

    .table-card {
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-card-border);
      background-color: var(--color-surface);
      box-shadow: var(--shadow-sm);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .table-card-header {
      padding: 10px 14px;
      border-bottom: 1px solid var(--color-card-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .table-title {
      font-size: 13px;
      font-weight: 600;
    }

    .table-caption {
      font-size: 11px;
      color: var(--color-text-secondary);
    }

    .badge {
      padding: 2px 8px;
      border-radius: 999px;
      background-color: rgba(33,128,141,0.08);
      color: var(--color-primary);
      font-size: 11px;
      border: 1px solid rgba(33,128,141,0.2);
    }

    .table-wrapper {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    thead {
      background-color: rgba(33,128,141,0.04);
    }

    th, td {
      padding: 8px 10px;
      border-bottom: 1px solid rgba(0,0,0,0.04);
      white-space: nowrap;
      text-align: left;
    }

    th {
      font-size: 11px;
      font-weight: 600;
      color: var(--color-text-secondary);
      cursor: pointer;
      position: relative;
    }

    th.sortable::after {
      content: '‚áÖ';
      position: absolute;
      right: 6px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 10px;
      opacity: 0.4;
    }

    th.sortable.sorted-asc::after {
      content: '‚ñ≤';
      opacity: 0.9;
    }

    th.sortable.sorted-desc::after {
      content: '‚ñº';
      opacity: 0.9;
    }

    tbody tr:hover {
      background-color: rgba(33,128,141,0.03);
    }

    .model-name {
      font-weight: 600;
      font-size: 12px;
    }

    .model-meta {
      font-size: 11px;
      color: var(--color-text-secondary);
    }

    .chip {
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 10px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .chip-primary {
      background-color: rgba(33,128,141,0.08);
      color: var(--color-primary);
    }

    .chip-gray {
      background-color: rgba(148,163,184,0.15);
      color: var(--color-text-secondary);
    }

    .chip-open {
      background-color: rgba(22,163,74,0.12);
      color: rgb(22,163,74);
    }

    .chip-proprietary {
      background-color: rgba(251,146,60,0.15);
      color: rgb(194,65,12);
    }

    .metric-strong {
      font-weight: 600;
    }

    .metric-muted {
      color: var(--color-text-secondary);
    }

    .footer-note {
      padding: 10px 14px;
      font-size: 11px;
      color: var(--color-text-secondary);
      border-top: 1px solid var(--color-card-border);
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: space-between;
      align-items: center;
    }

    .link {
      color: var(--color-primary);
      text-decoration: none;
    }

    .link:hover {
      text-decoration: underline;
    }

    .btn {
      border-radius: var(--radius-base);
      border: 1px solid var(--color-border);
      background-color: transparent;
      padding: 6px 10px;
      font-size: 11px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--color-text-secondary);
    }

    .btn-primary {
      border-color: var(--color-primary);
      color: var(--color-primary);
      background-color: rgba(33,128,141,0.05);
    }

    .btn-primary:hover {
      background-color: rgba(33,128,141,0.12);
    }

    .theme-toggle {
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 11px;
      border: 1px solid var(--color-border);
      background-color: rgba(0,0,0,0.02);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--color-text-secondary);
    }

    .theme-toggle-icon {
      font-size: 12px;
    }

    @media (max-width: 768px) {
      .app-header {
        flex-direction: column;
        align-items: flex-start;
      }
      .filters-row {
        flex-direction: column;
        align-items: stretch;
      }
    }
  </style>
</head>
<body>
<div class="app-root" id="app">
  <header class="app-header">
    <div class="app-title-block">
      <div class="app-title">Tableau de bord Benchmarks IA 2026</div>
      <div class="app-subtitle">
        Mod√®les propri√©taires + Perplexity + open source S‚Äëtier &mdash; donn√©es publiques agr√©g√©es (f√©vrier 2026)
      </div>
    </div>
    <div style="display:flex; align-items:center; gap:8px; flex-wrap:wrap;">
      <div class="tag">
        <span class="tag-dot"></span>
        Veille technologique &nbsp;‚Ä¢&nbsp; t√¢che Perplexity
      </div>
      <button class="theme-toggle" id="themeToggle" type="button">
        <span class="theme-toggle-icon" id="themeIcon">üåû</span>
        <span id="themeLabel">Mode clair</span>
      </button>
    </div>
  </header>

  <main class="app-main">
    <!-- Filters -->
    <section class="filters-row" aria-label="Filtres du tableau de bord">
      <div class="filter-group">
        <label class="filter-label" for="usageSelect">Usage principal</label>
        <select id="usageSelect" class="select">
          <option value="all">Tous les usages</option>
          <option value="text">Texte / g√©n√©raliste</option>
          <option value="code">Code / ing√©nierie</option>
          <option value="search">Recherche IA</option>
          <option value="deep">Deep research</option>
        </select>
      </div>
      <div class="filter-group">
        <label class="filter-label" for="typeSelect">Type de mod√®le</label>
        <select id="typeSelect" class="select">
          <option value="all">Tous</option>
          <option value="proprietary">Propri√©taire</option>
          <option value="open">Open source</option>
        </select>
      </div>
      <div class="filter-group" style="flex:1; min-width:200px;">
        <label class="filter-label" for="searchInput">Filtre texte</label>
        <input id="searchInput" class="search-input" type="text" placeholder="Rechercher un mod√®le ou un √©diteur‚Ä¶">
      </div>
      <div class="filter-group" style="min-width:220px;">
        <div class="filter-label">Dimension de tri</div>
        <div class="pill-row" id="metricPills">
          <button class="pill active" data-metric="intelligence">
            <span class="pill-dot"></span> Intelligence /
            composite
          </button>
          <button class="pill" data-metric="reasoning">
            <span class="pill-dot"></span> Raisonnement (ARC / AIME / GPQA)
          </button>
          <button class="pill" data-metric="coding">
            <span class="pill-dot"></span> Code (SWE‚Äëbench / HumanEval)
          </button>
          <button class="pill" data-metric="search">
            <span class="pill-dot"></span> Search / Deep research
          </button>
        </div>
      </div>
    </section>

    <!-- Main table -->
    <section class="table-card" aria-label="Tableau comparatif des mod√®les IA">
      <div class="table-card-header">
        <div>
          <div class="table-title">Benchmarks agr√©g√©s</div>
          <div class="table-caption">
            Cliques sur un en‚Äët√™te pour trier. Les scores sont des ordres de grandeur bas√©s sur les benchmarks publics (LM Council, Artificial Analysis, Search Arena, DRACO, open‚Äësource leaderboards).
          </div>
        </div>
        <div style="display:flex; gap:8px; align-items:center;">
          <span class="badge" id="updateBadge">Chargement...</span>
        </div>
      </div>
      <div class="table-wrapper">
        <table>
          <thead>
          <tr>
            <th>Mod√®le</th>
            <th>Type</th>
            <th class="sortable" data-sort-key="intelligence">Score global<br><span class="metric-muted">Intelligence / composite</span></th>
            <th class="sortable" data-sort-key="mmlu">Raisonnement / connaissance<br><span class="metric-muted">MMLU / GPQA / AIME</span></th>
            <th class="sortable" data-sort-key="coding">Code<br><span class="metric-muted">SWE‚Äëbench / HumanEval</span></th>
            <th class="sortable" data-sort-key="search">Search / Deep research<br><span class="metric-muted">Search Arena / DRACO</span></th>
            <th class="sortable" data-sort-key="context">Contexte</th>
            <th class="sortable" data-sort-key="price">Prix approx.<br><span class="metric-muted">$ / 1M tokens</span></th>
          </tr>
          </thead>
          <tbody id="modelsBody">
          <!-- Rows generated by JS -->
          </tbody>
        </table>
      </div>
      <div class="footer-note">
        <div>
          Donn√©es √† consolider √† partir de&nbsp;:
          <a class="link" href="https://lmcouncil.ai/benchmarks" target="_blank" rel="noopener noreferrer">LM Council</a>,
          <a class="link" href="https://artificialanalysis.ai/models" target="_blank" rel="noopener noreferrer">Artificial Analysis</a>,
          <a class="link" href="https://arena.ai/leaderboard/search" target="_blank" rel="noopener noreferrer">Search Arena</a>,
          <a class="link" href="https://www.perplexity.ai/api-platform/resources/perplexity-sonar-dominates-new-search-arena-evaluation" target="_blank" rel="noopener noreferrer">Perplexity Sonar</a>,
          <a class="link" href="https://vertu.com/lifestyle/open-source-llm-leaderboard-2026-rankings-benchmarks-the-best-models-right-now/" target="_blank" rel="noopener noreferrer">open‚Äësource leaderboard 2026</a>.
        </div>
        <button class="btn btn-primary" type="button" id="exportHint">
          ‚§¥ Transformer en t√¢che de veille
        </button>
      </div>
    </section>
  </main>
</div>

<script>
  // Donn√©es agr√©g√©es (ordres de grandeur bas√©s sur benchmarks publics, √† affiner avec les sources cit√©es)
  const models = [
    {
      name: "GPT‚Äë5.2 (xhigh)",
      vendor: "OpenAI",
      type: "proprietary",
      mainUsage: ["text", "code"],
      intelligence: 92,          // Intelligence Index / LM Council (approx)
      mmlu: 87,                  // MMLU / GPQA composite
      coding: 88,                // SWE‚Äëbench / HumanEval
      search: 70,                // GPT‚Äë5.2 Search (derri√®re Sonar & Gemini Grounding)
      context: 200,              // 200k+
      price: 100,                // prix relatif (1 = tr√®s cheap, 100 = cher)
      notes: "Fort en codage et raisonnement. √âcosyst√®me le plus large (agents, images, vid√©o)."
    },
    {
      name: "Claude Opus 4.6",
      vendor: "Anthropic",
      type: "proprietary",
      mainUsage: ["text", "code", "deep"],
      intelligence: 94,
      mmlu: 89,
      coding: 88,
      search: 72,
      context: 1000,
      price: 90,
      notes: "Leader pr√©f√©rence humaine (GDPval‚ÄëAA). Excellent en analyse longue et t√¢ches professionnelles."
    },
    {
      name: "Gemini 3.1 Pro",
      vendor: "Google",
      type: "proprietary",
      mainUsage: ["text", "code", "search"],
      intelligence: 95,
      mmlu: 92,   // MMLU / GPQA ~94.3 % GPQA
      coding: 90, // SWE‚Äëbench Verified ~80.6 %
      search: 92, // Gemini‚Äë3 Pro / 2.5 Pro Grounding
      context: 1000,
      price: 60,
      notes: "Tr√®s fort sur ARC‚ÄëAGI‚Äë2 et t√¢ches agentiques. Excellent en vid√©o et search."
    },
    {
      name: "Grok 4.1",
      vendor: "xAI",
      type: "proprietary",
      mainUsage: ["text", "search"],
      intelligence: 88,
      mmlu: 82,
      coding: 80,
      search: 78,
      context: 200,
      price: 50,
      notes: "Tr√®s bon compromis g√©n√©ral, avec int√©gration X/Twitter."
    },
    {
      name: "Perplexity Sonar‚ÄëReasoning‚ÄëPro",
      vendor: "Perplexity",
      type: "proprietary",
      mainUsage: ["search", "deep", "text"],
      intelligence: 90,
      mmlu: 85,  // sous‚Äëjacente (mod√®le frontier sous licence)
      coding: 82,
      search: 99, // co‚Äë#1 Search Arena (Elo 1136 ~ Gemini‚Äë2.5‚ÄëPro‚ÄëGrounding)
      context: 200,
      price: 40,
      notes: "Co‚Äë#1 Search Arena, #1 SimpleQA F‚Äëscore, leader DRACO en Deep Research."
    },
    // Open source S‚Äëtier
    {
      name: "Kimi K2.5",
      vendor: "Moonshot",
      type: "open",
      mainUsage: ["text", "code"],
      intelligence: 90,           // composite open‚Äësource S‚Äëtier
      mmlu: 92,                   // MMLU 92.0
      coding: 96,                 // HumanEval 99.0, tr√®s fort
      search: 60,
      context: 260,
      price: 5,
      notes: "Open‚Äëweights S‚Äëtier. Excellent en code, tr√®s bon en MMLU. Licence commerciale permissive."
    },
    {
      name: "DeepSeek V3.2",
      vendor: "DeepSeek",
      type: "open",
      mainUsage: ["text", "code"],
      intelligence: 88,
      mmlu: 88,
      coding: 90,
      search: 55,
      context: 200,
      price: 3,
      notes: "Tr√®s bon rapport perf/prix, licence MIT. Fort en raisonnement math√©matique."
    },
    {
      name: "GLM‚Äë4.7",
      vendor: "Zhipu AI",
      type: "open",
      mainUsage: ["text", "code"],
      intelligence: 87,
      mmlu: 86,
      coding: 92, // HumanEval ~94, LiveCodeBench ~85
      search: 50,
      context: 128,
      price: 2,
      notes: "Open‚Äësource orient√© code, tr√®s comp√©titif en LiveCodeBench."
    }
  ];

  let currentMetric = "intelligence";
  let currentSortKey = "intelligence";
  let currentSortDir = "desc";

  const usageSelect = document.getElementById("usageSelect");
  const typeSelect = document.getElementById("typeSelect");
  const searchInput = document.getElementById("searchInput");
  const metricPills = document.getElementById("metricPills");
  const tbody = document.getElementById("modelsBody");
  const exportHint = document.getElementById("exportHint");

  function renderTable() {
    const usageFilter = usageSelect.value;
    const typeFilter = typeSelect.value;
    const query = searchInput.value.trim().toLowerCase();

    let data = models.filter(m => {
      const matchesType =
        typeFilter === "all" ||
        (typeFilter === "proprietary" && m.type === "proprietary") ||
        (typeFilter === "open" && m.type === "open");

      const matchesUsage =
        usageFilter === "all" ||
        (m.mainUsage && m.mainUsage.includes(usageFilter));

      const matchesQuery =
        !query ||
        m.name.toLowerCase().includes(query) ||
        m.vendor.toLowerCase().includes(query);

      return matchesType && matchesUsage && matchesQuery;
    });

    data.sort((a, b) => {
      const key = currentSortKey;
      const av = a[key] ?? -Infinity;
      const bv = b[key] ?? -Infinity;
      if (av === bv) return 0;
      if (currentSortDir === "asc") {
        return av < bv ? -1 : 1;
      } else {
        return av > bv ? -1 : 1;
      }
    });

    tbody.innerHTML = "";
    data.forEach(model => {
      const tr = document.createElement("tr");

      const tdModel = document.createElement("td");
      const nameDiv = document.createElement("div");
      nameDiv.className = "model-name";
      nameDiv.textContent = model.name;
      const metaDiv = document.createElement("div");
      metaDiv.className = "model-meta";
      metaDiv.textContent = model.vendor;
      tdModel.appendChild(nameDiv);
      tdModel.appendChild(metaDiv);

      const tdType = document.createElement("td");
      const chip = document.createElement("span");
      chip.className = "chip " + (model.type === "open" ? "chip-open" : "chip-proprietary");
      chip.textContent = model.type === "open" ? "Open source" : "Propri√©taire";
      tdType.appendChild(chip);

      const tdInt = document.createElement("td");
      tdInt.innerHTML = model.intelligence != null
        ? "<span class='metric-strong'>" + model.intelligence.toFixed(0) + "</span>"
        : "<span class='metric-muted'>n.d.</span>";

      const tdReason = document.createElement("td");
      tdReason.innerHTML = model.mmlu != null
        ? "<span class='metric-strong'>" + model.mmlu.toFixed(0) + "</span>"
        : "<span class='metric-muted'>n.d.</span>";

      const tdCode = document.createElement("td");
      tdCode.innerHTML = model.coding != null
        ? "<span class='metric-strong'>" + model.coding.toFixed(0) + "</span>"
        : "<span class='metric-muted'>n.d.</span>";

      const tdSearch = document.createElement("td");
      tdSearch.innerHTML = model.search != null
        ? "<span class='metric-strong'>" + model.search.toFixed(0) + "</span>"
        : "<span class='metric-muted'>n.d.</span>";

      const tdContext = document.createElement("td");
      tdContext.textContent = model.context ? model.context + "k+" : "n.d.";

      const tdPrice = document.createElement("td");
      if (model.price != null) {
        tdPrice.innerHTML = "<span class='metric-strong'>" + model.price.toFixed(0) + "</span>" +
          " <span class='metric-muted'>&nbsp;(relatif)</span>";
      } else {
        tdPrice.innerHTML = "<span class='metric-muted'>n.d.</span>";
      }

      tr.appendChild(tdModel);
      tr.appendChild(tdType);
      tr.appendChild(tdInt);
      tr.appendChild(tdReason);
      tr.appendChild(tdCode);
      tr.appendChild(tdSearch);
      tr.appendChild(tdContext);
      tr.appendChild(tdPrice);

      tr.title = model.notes || "";
      tbody.appendChild(tr);
    });
  }

  function updateSortIndicators() {
    const ths = document.querySelectorAll("th.sortable");
    ths.forEach(th => {
      th.classList.remove("sorted-asc", "sorted-desc");
      const key = th.getAttribute("data-sort-key");
      if (key === currentSortKey) {
        th.classList.add(currentSortDir === "asc" ? "sorted-asc" : "sorted-desc");
      }
    });
  }

  // Event listeners
  usageSelect.addEventListener("change", renderTable);
  typeSelect.addEventListener("change", renderTable);
  searchInput.addEventListener("input", renderTable);

  metricPills.addEventListener("click", (e) => {
    const pill = e.target.closest(".pill");
    if (!pill) return;
    const metric = pill.getAttribute("data-metric");
    currentMetric = metric;
    if (metric === "intelligence") currentSortKey = "intelligence";
    if (metric === "reasoning") currentSortKey = "mmlu";
    if (metric === "coding") currentSortKey = "coding";
    if (metric === "search") currentSortKey = "search";
    currentSortDir = "desc";

    Array.from(metricPills.querySelectorAll(".pill")).forEach(p => p.classList.remove("active"));
    pill.classList.add("active");

    updateSortIndicators();
    renderTable();
  });

  document.querySelectorAll("th.sortable").forEach(th => {
    th.addEventListener("click", () => {
      const key = th.getAttribute("data-sort-key");
      if (currentSortKey === key) {
        currentSortDir = currentSortDir === "asc" ? "desc" : "asc";
      } else {
        currentSortKey = key;
        currentSortDir = "desc";
      }
      updateSortIndicators();
      renderTable();
    });
  });

  exportHint.addEventListener("click", () => {
    alert(
      "Pour transformer ce dashboard en t√¢che de veille Perplexity :\n\n" +
      "1. D√©cris le p√©rim√®tre (mod√®les, benchmarks, sources) dans un prompt unique.\n" +
      "2. Demande explicitement un \"monitoring r√©gulier\" des sources suivantes : LM Council, Artificial Analysis, Search Arena, DRACO, leaderboards open source.\n" +
      "3. Utilise ce tableau comme canevas : la t√¢che pourra le mettre √† jour √† chaque ex√©cution."
    );
  });

  // Theme toggle
  const rootHtml = document.documentElement;
  const themeToggle = document.getElementById("themeToggle");
  const themeIcon = document.getElementById("themeIcon");
  const themeLabel = document.getElementById("themeLabel");

  function setTheme(mode) {
    rootHtml.setAttribute("data-color-scheme", mode);
    if (mode === "dark") {
      themeIcon.textContent = "üåô";
      themeLabel.textContent = "Mode sombre";
    } else {
      themeIcon.textContent = "üåû";
      themeLabel.textContent = "Mode clair";
    }
  }

  themeToggle.addEventListener("click", () => {
    const current = rootHtml.getAttribute("data-color-scheme") || "light";
    setTheme(current === "light" ? "dark" : "light");
  });

  // Initial render
  setTheme("light");
  updateSortIndicators();
  renderTable();
</script>
</body>
</html>
